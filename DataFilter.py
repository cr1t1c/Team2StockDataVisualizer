#The dateFilter class has a dateFilter method. This method will need to take a dictionary (data) and return a modified dictionary that excludes values outside the user's choices
#Start date and end date will also be in the dictionary format. Example below

#dictionary example 
    #startDate = {
        # "year" : 2007
        # "month" : 11
        # "day" : 12
        # }


############Use the following start date dictionary to test start date
"""startDate = {"year" : 2007, "month" : 11, "day" : 12}


############Use the following end date dictionary to test end date
endDate = {"year" : 2008, "month" : 1, "day" : 5}

############Use the following data to test your method.
testData = {'Meta Data': {'1. Information': 'Intraday (5min) open, high, low, close prices and volume', '2. Symbol': 'TMUS', '3. Last Refreshed': '2022-07-08 16:30:00', '4. Interval': '5min', '5. Output Size': 'Compact', '6. Time Zone': 'US/Eastern'}, 'Time Series (5min)': {'2022-07-08 16:30:00': {'1. open': '135.7200', '2. high': '135.7200', '3. low': '135.7200', '4. close': '135.7200', '5. volume': '354'}, '2022-07-08 16:10:00': {'1. open': '135.7200', '2. high': '135.7200', '3. low': '135.7200', '4. close': '135.7200', '5. volume': '1863'}, '2022-07-08 16:05:00': {'1. open': '135.7200', '2. high': '135.7200', '3. low': '135.7200', '4. close': '135.7200', '5. volume': '50213'}, '2022-07-08 16:00:00': {'1. open': '135.7000', '2. high': '135.9100', '3. low': '135.6400', '4. close': '135.7200', '5. volume': '212671'}, '2022-07-08 15:55:00': {'1. open': '135.5200', '2. high': '135.7700', '3. low': '135.4000', '4. close': '135.7300', '5. volume': '87519'}, '2022-07-08 15:50:00': {'1. open': '135.7350', '2. high': '135.7500', '3. low': '135.4500', '4. close': '135.5350', '5. volume': '54809'}, '2022-07-08 15:45:00': {'1. open': '135.5200', '2. high': '135.7200', '3. low': '135.4900', '4. close': '135.7200', '5. volume': '28732'}, '2022-07-08 15:40:00': {'1. open': '135.7300', '2. high': '135.7600', '3. low': '135.4900', '4. close': '135.5190', '5. volume': '41042'}, '2022-07-08 15:35:00': {'1. open': '135.7900', '2. high': '135.8650', '3. low': '135.6600', '4. close': '135.7400', '5. volume': '40140'}, '2022-07-08 15:30:00': {'1. open': '135.7600', '2. high': '135.8700', '3. low': '135.7450', '4. close': '135.8000', '5. volume': '23062'}, '2022-07-08 15:25:00': {'1. open': '135.7400', '2. high': '135.8490', '3. low': '135.7000', '4. close': '135.7800', '5. volume': '21470'}, '2022-07-08 15:20:00': {'1. open': '135.9000', '2. high': '135.9100', '3. low': '135.7500', '4. close': '135.7600', '5. volume': '18415'}, '2022-07-08 15:15:00': {'1. open': '135.7901', '2. high': '135.9400', '3. low': '135.7901', '4. close': '135.8900', '5. volume': '18261'}, '2022-07-08 15:10:00': {'1. open': '135.9400', '2. high': '135.9700', '3. low': '135.8000', '4. close': '135.8200', '5. volume': '15240'}, '2022-07-08 15:05:00': {'1. open': '135.8700', '2. high': '135.9900', '3. low': '135.7700', '4. close': '135.9600', '5. volume': '16353'}, '2022-07-08 15:00:00': {'1. open': '135.7400', '2. high': '135.8900', '3. low': '135.7200', '4. close': '135.8700', '5. volume': '10129'}, '2022-07-08 14:55:00': {'1. open': '135.7600', '2. high': '135.8900', '3. low': '135.7400', '4. close': '135.7400', '5. volume': '16998'}, '2022-07-08 14:50:00': {'1. open': '135.7450', '2. high': '135.7900', '3. low': '135.6900', '4. close': '135.7400', '5. volume': '17718'}, '2022-07-08 14:45:00': {'1. open': '135.7500', '2. high': '135.7900', '3. low': '135.6700', '4. close': '135.7400', '5. volume': '15857'}, '2022-07-08 14:40:00': {'1. open': '135.8000', '2. high': '135.8400', '3. low': '135.7100', '4. close': '135.7300', '5. volume': '16172'}, '2022-07-08 14:35:00': {'1. open': '135.7700', '2. high': '135.7850', '3. low': '135.6800', '4. close': '135.7850', '5. volume': '11422'}, '2022-07-08 14:30:00': {'1. open': '135.7000', '2. high': '135.7950', '3. low': '135.6750', '4. close': '135.7950', '5. volume': '10048'}, '2022-07-08 14:25:00': {'1. open': '135.5900', '2. high': '135.7900', '3. low': '135.5900', '4. close': '135.7100', '5. volume': '20492'}, '2022-07-08 14:20:00': {'1. open': '135.5701', '2. high': '135.6800', '3. low': '135.5500', '4. close': '135.5900', '5. volume': '11667'}, '2022-07-08 14:15:00': {'1. open': '135.6000', '2. high': '135.6500', '3. low': '135.5350', '4. close': '135.5700', '5. volume': '12008'}, '2022-07-08 14:10:00': {'1. open': '135.4850', '2. high': '135.6200', '3. low': '135.4650', '4. close': '135.5800', '5. volume': '12032'}, '2022-07-08 14:05:00': {'1. open': '135.5700', '2. high': '135.5700', '3. low': '135.3300', '4. close': '135.4800', '5. volume': '11239'}, '2022-07-08 14:00:00': {'1. open': '135.5400', '2. high': '135.6100', '3. low': '135.4800', '4. close': '135.5290', '5. volume': '26092'}, '2022-07-08 13:55:00': {'1. open': '135.5650', '2. high': '135.5900', '3. low': '135.4900', '4. close': '135.5350', '5. volume': '14630'}, '2022-07-08 13:50:00': {'1. open': '135.2400', '2. high': '135.6250', '3. low': '135.2200', '4. close': '135.5700', '5. volume': '25827'}, '2022-07-08 13:45:00': {'1. open': '135.3000', '2. high': '135.3693', '3. low': '135.2700', '4. close': '135.2800', '5. volume': '28502'}, '2022-07-08 13:40:00': {'1. open': '135.2600', '2. high': '135.3950', '3. low': '135.2300', '4. close': '135.3200', '5. volume': '11693'}, '2022-07-08 13:35:00': {'1. open': '135.3700', '2. high': '135.3700', '3. low': '135.2700', '4. close': '135.3100', '5. volume': '10538'}, '2022-07-08 13:30:00': {'1. open': '135.2700', '2. high': '135.4500', '3. low': '135.2700', '4. close': '135.4000', '5. volume': '17554'}, '2022-07-08 13:25:00': {'1. open': '135.1800', '2. high': '135.2700', '3. low': '135.1500', '4. close': '135.2600', '5. volume': '12327'}, '2022-07-08 13:20:00': {'1. open': '135.0800', '2. high': '135.2150', '3. low': '135.0500', '4. close': '135.1800', '5. volume': '9292'}, '2022-07-08 13:15:00': {'1. open': '135.0800', '2. high': '135.1800', '3. low': '135.0300', '4. close': '135.0500', '5. volume': '13196'}, '2022-07-08 13:10:00': {'1. open': '134.9200', '2. high': '135.0500', '3. low': '134.9200', '4. close': '135.0100', '5. volume': '13337'}, '2022-07-08 13:05:00': {'1. open': '134.9800', '2. high': '135.0300', '3. low': '134.8400', '4. close': '134.9100', '5. volume': '21935'}, '2022-07-08 13:00:00': {'1. open': '135.0200', '2. high': '135.1300', '3. low': '134.9500', '4. close': '134.9700', '5. volume': '12210'}, '2022-07-08 12:55:00': {'1. open': '135.1500', '2. high': '135.1600', '3. low': '134.9600', '4. close': '135.0150', '5. volume': '23725'}, '2022-07-08 12:50:00': {'1. open': '135.2000', '2. high': '135.2000', '3. low': '135.0300', '4. close': '135.1800', '5. volume': '18810'}, '2022-07-08 12:45:00': {'1. open': '135.1100', '2. high': '135.2650', '3. low': '135.0980', '4. close': '135.2200', '5. volume': '18561'}, '2022-07-08 12:40:00': {'1. open': '135.3100', '2. high': '135.3500', '3. low': '135.1000', '4. close': '135.1000', '5. volume': '27990'}, '2022-07-08 12:35:00': {'1. open': '135.2200', '2. high': '135.3200', '3. low': '135.1250', '4. close': '135.3100', '5. volume': '15985'}, '2022-07-08 12:30:00': {'1. open': '135.2400', '2. high': '135.3000', '3. low': '135.1450', '4. close': '135.2000', '5. volume': '15630'}, '2022-07-08 12:25:00': {'1. open': '135.4500', '2. high': '135.4500', '3. low': '135.2000', '4. close': '135.2000', '5. volume': '13355'}, '2022-07-08 12:20:00': {'1. open': '135.4700', '2. high': '135.5700', '3. low': '135.4300', '4. close': '135.4600', '5. volume': '6564'}, '2022-07-08 12:15:00': {'1. open': '135.6300', '2. high': '135.6900', '3. low': '135.4700', '4. close': '135.5100', '5. volume': '14247'}, '2022-07-08 12:10:00': {'1. open': '135.7900', '2. high': '135.8800', '3. low': '135.5800', '4. close': '135.6200', '5. volume': '90158'}, '2022-07-08 12:05:00': {'1. open': '135.8600', '2. high': '135.8800', '3. low': '135.7604', '4. close': '135.7900', '5. volume': '10024'}, '2022-07-08 12:00:00': {'1. open': '135.7600', '2. high': '135.8678', '3. low': '135.7600', '4. close': '135.8450', '5. volume': '7911'}, '2022-07-08 11:55:00': {'1. open': '135.7500', '2. high': '135.9400', '3. low': '135.7400', '4. close': '135.7850', '5. volume': '9698'}, '2022-07-08 11:50:00': {'1. open': '135.8600', '2. high': '135.8700', '3. low': '135.5900', '4. close': '135.7500', '5. volume': '28048'}, '2022-07-08 11:45:00': {'1. open': '135.9700', '2. high': '135.9800', '3. low': '135.8100', '4. close': '135.8500', '5. volume': '11072'}, '2022-07-08 11:40:00': {'1. open': '135.9700', '2. high': '136.0199', '3. low': '135.8500', '4. close': '136.0199', '5. volume': '12577'}, '2022-07-08 11:35:00': {'1. open': '136.0700', '2. high': '136.1500', '3. low': '135.9600', '4. close': '136.0000', '5. volume': '14426'}, '2022-07-08 11:30:00': {'1. open': '135.9500', '2. high': '136.1500', '3. low': '135.9400', '4. close': '136.0800', '5. volume': '15856'}, '2022-07-08 11:25:00': {'1. open': '135.8900', '2. high': '136.0400', '3. low': '135.8900', '4. close': '135.9600', '5. volume': '8559'}, '2022-07-08 11:20:00': {'1. open': '135.9500', '2. high': '136.0000', '3. low': '135.8100', '4. close': '135.8800', '5. volume': '13169'}, '2022-07-08 11:15:00': {'1. open': '135.9800', '2. high': '136.0800', '3. low': '135.9300', '4. close': '135.9400', '5. volume': '24159'}, '2022-07-08 11:10:00': {'1. open': '135.9400', '2. high': '135.9900', '3. low': '135.7400', '4. close': '135.9900', '5. volume': '55070'}, '2022-07-08 11:05:00': {'1. open': '135.9400', '2. high': '136.0000', '3. low': '135.8200', '4. close': '135.9500', '5. volume': '23363'}, '2022-07-08 11:00:00': {'1. open': '136.0700', '2. high': '136.1300', '3. low': '135.9300', '4. close': '135.9400', '5. volume': '20709'}, '2022-07-08 10:55:00': {'1. open': '136.0600', '2. high': '136.0650', '3. low': '135.8300', '4. close': '136.0193', '5. volume': '37999'}, '2022-07-08 10:50:00': {'1. open': '136.1400', '2. high': '136.2400', '3. low': '136.0700', '4. close': '136.0700', '5. volume': '14754'}, '2022-07-08 10:45:00': {'1. open': '136.2400', '2. high': '136.2500', '3. low': '135.9800', '4. close': '136.1200', '5. volume': '26121'}, '2022-07-08 10:40:00': {'1. open': '135.8650', '2. high': '136.2400', '3. low': '135.8100', '4. close': '136.2400', '5. volume': '68332'}, '2022-07-08 10:35:00': {'1. open': '135.9100', '2. high': '135.9800', '3. low': '135.7900', '4. close': '135.8429', '5. volume': '22860'}, '2022-07-08 10:30:00': {'1. open': '135.4100', '2. high': '136.1000', '3. low': '135.4100', '4. close': '135.9300', '5. volume': '218195'}, '2022-07-08 10:25:00': {'1. open': '135.2800', '2. high': '135.4000', '3. low': '135.2000', '4. close': '135.3500', '5. volume': '39536'}, '2022-07-08 10:20:00': {'1. open': '135.4000', '2. high': '135.4100', '3. low': '135.2000', '4. close': '135.2400', '5. volume': '33417'}, '2022-07-08 10:15:00': {'1. open': '135.1200', '2. high': '135.5500', '3. low': '135.0800', '4. close': '135.3200', '5. volume': '52246'}, '2022-07-08 10:10:00': {'1. open': '134.9200', '2. high': '135.1200', '3. low': '134.7500', '4. close': '135.1200', '5. volume': '102483'}, '2022-07-08 10:05:00': {'1. open': '134.9600', '2. high': '135.0100', '3. low': '134.6550', '4. close': '134.9400', '5. volume': '90413'}, '2022-07-08 10:00:00': {'1. open': '134.9300', '2. high': '136.2600', '3. low': '134.7600', '4. close': '134.9400', '5. volume': '257935'}, '2022-07-08 09:55:00': {'1. open': '135.2000', '2. high': '135.3300', '3. low': '134.7400', '4. close': '134.8700', '5. volume': '31449'}, '2022-07-08 09:50:00': {'1. open': '135.1150', '2. high': '135.3500', '3. low': '134.9700', '4. close': '135.2700', '5. volume': '48254'}, '2022-07-08 09:45:00': {'1. open': '135.2000', '2. high': '135.5400', '3. low': '135.0500', '4. close': '135.1150', '5. volume': '57032'}, '2022-07-08 09:40:00': {'1. open': '135.0400', '2. high': '135.3400', '3. low': '134.8000', '4. close': '135.2200', '5. volume': '68070'}, '2022-07-08 09:35:00': {'1. open': '136.2600', '2. high': '136.2600', '3. low': '134.9200', '4. close': '135.0500', '5. volume': '94519'}, '2022-07-08 09:30:00': {'1. open': '136.0800', '2. high': '136.3800', '3. low': '136.0800', '4. close': '136.3800', '5. volume': '1236'}, '2022-07-08 09:00:00': {'1. open': '135.7600', '2. high': '135.7600', '3. low': '135.7600', '4. close': '135.7600', '5. volume': '1153'}, '2022-07-07 16:40:00': {'1. open': '136.3300', '2. high': '136.3300', '3. low': '136.3300', '4. close': '136.3300', '5. volume': '12151'}, '2022-07-07 16:15:00': {'1. open': '136.3400', '2. high': '136.3500', '3. low': '136.3300', '4. close': '136.3300', '5. volume': '1244'}, '2022-07-07 16:10:00': {'1. open': '136.5300', '2. high': '136.5300', '3. low': '135.8700', '4. close': '135.8700', '5. volume': '117638'}, '2022-07-07 16:05:00': {'1. open': '136.3300', '2. high': '136.3300', '3. low': '136.3300', '4. close': '136.3300', '5. volume': '418436'}, '2022-07-07 16:00:00': {'1. open': '136.4200', '2. high': '136.4210', '3. low': '136.0600', '4. close': '136.2600', '5. volume': '322158'}, '2022-07-07 15:55:00': {'1. open': '136.7450', '2. high': '136.8200', '3. low': '136.3200', '4. close': '136.4200', '5. volume': '145979'}, '2022-07-07 15:50:00': {'1. open': '136.7300', '2. high': '136.9000', '3. low': '136.7300', '4. close': '136.7450', '5. volume': '56882'}, '2022-07-07 15:45:00': {'1. open': '136.7800', '2. high': '136.8800', '3. low': '136.6200', '4. close': '136.7900', '5. volume': '66859'}, '2022-07-07 15:40:00': {'1. open': '137.0900', '2. high': '137.1000', '3. low': '136.7950', '4. close': '136.8100', '5. volume': '32706'}, '2022-07-07 15:35:00': {'1. open': '137.1100', '2. high': '137.1800', '3. low': '137.0800', '4. close': '137.0900', '5. volume': '38764'}, '2022-07-07 15:30:00': {'1. open': '137.2200', '2. high': '137.3200', '3. low': '137.1200', '4. close': '137.1200', '5. volume': '29428'}, '2022-07-07 15:25:00': {'1. open': '137.2300', '2. high': '137.3850', '3. low': '137.2200', '4. close': '137.2300', '5. volume': '35198'}, '2022-07-07 15:20:00': {'1. open': '137.2200', '2. high': '137.3100', '3. low': '137.2100', '4. close': '137.2400', '5. volume': '23375'}, '2022-07-07 15:15:00': {'1. open': '136.8954', '2. high': '137.2300', '3. low': '136.8600', '4. close': '137.2300', '5. volume': '30921'}, '2022-07-07 15:10:00': {'1. open': '136.9100', '2. high': '137.0100', '3. low': '136.8400', '4. close': '136.9000', '5. volume': '40931'}, '2022-07-07 15:05:00': {'1. open': '136.9300', '2. high': '136.9300', '3. low': '136.8500', '4. close': '136.9000', '5. volume': '18893'}, '2022-07-07 15:00:00': {'1. open': '136.6300', '2. high': '136.9400', '3. low': '136.6200', '4. close': '136.9400', '5. volume': '54651'}}}"""
from datetime import datetime

class dateFilter:
    def dateFilter(data, startDate, endDate):
        #data is passed to the date filter method in a dictionary.
        startYear = startDate.get("year")
        startMonth = startDate.get("month")
        startDay = startDate.get("day")
        startDate = datetime.strptime(f"{startYear}-{startMonth}-{startDay} 00:00:00", "%Y-%m-%d %H:%M:%S")

        endYear = endDate.get("year")
        endMonth = endDate.get("month")
        endDay = endDate.get("day")
        endDate = datetime.strptime(f"{endYear}-{endMonth}-{endDay} 00:00:00", "%Y-%m-%d %H:%M:%S")

        for x in data.keys():
            if 'Meta' in x:
                continue
            else: 
                interval = x

        realData = data.get(interval)

        for y in list(realData.keys()):
            try:
                date = datetime.strptime(y, "%Y-%m-%d %H:%M:%S")
            except:
                date = datetime.strptime(f"{y} 00:00:00", "%Y-%m-%d %H:%M:%S")

            if(date < startDate or date > endDate):
                realData.pop(y)

        print("\n\n\n\n\n\n\n\n\n\n\n\n\n\n")
        print(realData)
        return realData
        #replace pass with the code
        pass





